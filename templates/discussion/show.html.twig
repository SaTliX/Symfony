{% extends 'base.html.twig' %}

{% block title %}Discussion : {{ discussion.titre }}{% endblock %}

{% block body %}

<div class="container mt-5">
    <a href="{{ path('app_discussion_list') }}" class="btn btn-secondary mb-3">
        <i class="bi bi-arrow-left"></i> Retour Ã  la liste des forums
    </a>

    <h1>{{ discussion.titre }}</h1>
    <div class="card mt-3">
        <div class="card-body">
            <ul class="list-group">
                {% for message in discussion.messages %}
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-md-2"><strong>{{ message.user.username }}</strong></div>
                            <div class="col-md-8">{{ message.content }}</div>
                            <div class="col-md-2 text-right">{{ message.createdAt|date('d/m/Y H:i') }}</div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <hr>

    <h2>Ajouter un message :</h2>
    <form method="post" action="{{ path('app_message_create', {'discussionId': discussion.id}) }}">
        <div class="form-group">
            <textarea name="content" rows="5" cols="50" class="form-control" required></textarea>
        </div>
        <div class="form-group mt-3"> <!-- Ajout de la classe mt-3 pour l'espacement -->
            <button type="submit" class="btn btn-primary">Ajouter</button>
        </div>
    </form>
</div>
{% endblock %}
